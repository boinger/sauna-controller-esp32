; PlatformIO Configuration for Sauna Controller
; https://docs.platformio.org/page/projectconf.html
; Requires PlatformIO Core 6.1+ (for unified test runner)

; --- Shared settings across all environments ---
[env]
check_tool = cppcheck
check_severity = low
check_flags =
    cppcheck: --enable=all --std=c++11

; --- ESP32 firmware build ---
[env:esp32]
platform = espressif32@6.12.0
board = esp32dev
framework = arduino
monitor_speed = 115200

; Libraries
lib_deps =
    HomeSpan/HomeSpan@^1.9.1               ; HomeKit accessory protocol
    milesburton/DallasTemperature@^4.0.6   ; DS18B20 temperature sensor
    paulstoffregen/OneWire@^2.3.8     ; OneWire protocol for DS18B20

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=3              ; Debug level (0=none, 5=verbose)
    -DCONFIG_ASYNC_TCP_RUNNING_CORE=1

; Upload settings (adjust port as needed)
; Find port: ls /dev/cu.* (macOS) or ls /dev/ttyUSB* (Linux)
; upload_port = /dev/cu.usbserial-*
; monitor_port = /dev/cu.usbserial-*

; --- Native host environment for unit tests ---
[env:native]
platform = native
test_framework = unity
build_flags = -std=c++11
